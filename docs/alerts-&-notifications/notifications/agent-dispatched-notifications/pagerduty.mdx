---
custom_edit_url: "https://github.com/khulnasoft/khulnasoft/edit/master/src/health/notifications/pagerduty/metadata.yaml"
sidebar_label: "PagerDuty"
docs_status: "Published"
docs_rel_path: "Alerts & Notifications/Notifications/Agent Dispatched Notifications"
message: "DO NOT EDIT THIS FILE DIRECTLY, IT IS GENERATED BY THE NOTIFICATION'S metadata.yaml FILE"
sidebar_position: "1202670"
docs_link: "https://docs.khulnasoft.com/docs/alerts-&-notifications/notifications/agent-dispatched-notifications/pagerduty"
---


# PagerDuty


<img src="https://khulnasoft.com/img/pagerduty.png" width="150"/>


PagerDuty is an enterprise incident resolution service that integrates with ITOps and DevOps monitoring stacks to improve operational reliability and agility. From enriching and aggregating events to correlating them into incidents, PagerDuty streamlines the incident management process by reducing alert noise and resolution times.
You can send notifications to PagerDuty using Khulnasoft's Agent alert notification feature, which supports dozens of endpoints, user roles, and more.



<img src="https://img.shields.io/badge/maintained%20by-Khulnasoft-%2300ab44" />

## Setup

### Prerequisites

#### 

- An installation of the [PagerDuty](https://www.pagerduty.com/docs/guides/agent-install-guide/) Agent on the node running the Khulnasoft Agent
- A PagerDuty Generic API service using either the `Events API v2` or `Events API v1`
- [Add a new service](https://support.pagerduty.com/docs/services-and-integrations#section-configuring-services-and-integrations) to PagerDuty. Click Use our API directly and select either `Events API v2` or `Events API v1`. Once you finish creating the service, click on the Integrations tab to find your Integration Key.
- Access to the terminal where Khulnasoft Agent is running



### Configuration

#### File

The configuration file name for this integration is `health_alarm_notify.conf`.


You can edit the configuration file using the [`edit-config`](/docs/khulnasoft-agent/configuration#edit-a-configuration-file-using-edit-config) script from the
Khulnasoft [config directory](/docs/khulnasoft-agent/configuration#the-khulnasoft-config-directory).

```bash
cd /etc/khulnasoft 2>/dev/null || cd /opt/khulnasoft/etc/khulnasoft
sudo ./edit-config health_alarm_notify.conf
```
#### Options

The following options can be defined for this notification

<details open><summary>Config Options</summary>

| Name | Description | Default | Required |
|:----|:-----------|:-------|:--------:|
| SEND_PD | Set `SEND_PD` to YES | YES | yes |
| DEFAULT_RECIPIENT_PD | Set `DEFAULT_RECIPIENT_PD` to the PagerDuty service key you want the alert notifications to be sent to. You can define multiple service keys like this: `pd_service_key_1` `pd_service_key_2`. |  | yes |

##### DEFAULT_RECIPIENT_PD

All roles will default to this variable if left unconfigured.

The `DEFAULT_RECIPIENT_PD` can be edited in the following entries at the bottom of the same file:
```text
role_recipients_pd[sysadmin]="xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxa"
role_recipients_pd[domainadmin]="xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxb"
role_recipients_pd[dba]="xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxc"
role_recipients_pd[webmaster]="xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxd"
role_recipients_pd[proxyadmin]="xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxe"
role_recipients_pd[sitemgr]="xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxf"
```


</details>

#### Examples

##### Basic Configuration



```yaml
#------------------------------------------------------------------------------
# pagerduty.com notification options

SEND_PD="YES"
DEFAULT_RECIPIENT_PD="xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"
USE_PD_VERSION="2"

```


## Troubleshooting

### Test Notification

You can run the following command by hand, to test alerts configuration:

```bash
# become user khulnasoft
sudo su -s /bin/bash khulnasoft

# enable debugging info on the console
export KHULNASOFT_ALARM_NOTIFY_DEBUG=1

# send test alarms to sysadmin
/usr/libexec/khulnasoft/plugins.d/alarm-notify.sh test

# send test alarms to any role
/usr/libexec/khulnasoft/plugins.d/alarm-notify.sh test "ROLE"
```

Note that this will test _all_ alert mechanisms for the selected role.


