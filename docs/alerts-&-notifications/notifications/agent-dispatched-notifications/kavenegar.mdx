---
custom_edit_url: "https://github.com/khulnasoft/khulnasoft/edit/master/src/health/notifications/kavenegar/metadata.yaml"
sidebar_label: "Kavenegar"
docs_status: "Published"
docs_rel_path: "Alerts & Notifications/Notifications/Agent Dispatched Notifications"
message: "DO NOT EDIT THIS FILE DIRECTLY, IT IS GENERATED BY THE NOTIFICATION'S metadata.yaml FILE"
sidebar_position: "1202610"
docs_link: "https://docs.khulnasoft.com/docs/alerts-&-notifications/notifications/agent-dispatched-notifications/kavenegar"
---


# Kavenegar


<img src="https://khulnasoft.com/img/kavenegar.png" width="150"/>


[Kavenegar](https://kavenegar.com/) as service for software developers, based in Iran, provides send and receive SMS, calling voice by using its APIs.
You can send notifications to Kavenegar using Khulnasoft's Agent alert notification feature, which supports dozens of endpoints, user roles, and more.



<img src="https://img.shields.io/badge/maintained%20by-Khulnasoft-%2300ab44" />

## Setup

### Prerequisites

#### 

- The APIKEY and Sender from http://panel.kavenegar.com/client/setting/account
- Access to the terminal where Khulnasoft Agent is running



### Configuration

#### File

The configuration file name for this integration is `health_alarm_notify.conf`.


You can edit the configuration file using the [`edit-config`](/docs/khulnasoft-agent/configuration#edit-a-configuration-file-using-edit-config) script from the
Khulnasoft [config directory](/docs/khulnasoft-agent/configuration#the-khulnasoft-config-directory).

```bash
cd /etc/khulnasoft 2>/dev/null || cd /opt/khulnasoft/etc/khulnasoft
sudo ./edit-config health_alarm_notify.conf
```
#### Options

The following options can be defined for this notification

<details open><summary>Config Options</summary>

| Name | Description | Default | Required |
|:----|:-----------|:-------|:--------:|
| SEND_KAVENEGAR | Set `SEND_KAVENEGAR` to YES | YES | yes |
| KAVENEGAR_API_KEY | Set `KAVENEGAR_API_KEY` to your API key. |  | yes |
| KAVENEGAR_SENDER | Set `KAVENEGAR_SENDER` to the value of your Sender. |  | yes |
| DEFAULT_RECIPIENT_KAVENEGAR | Set `DEFAULT_RECIPIENT_KAVENEGAR` to the SMS recipient you want the alert notifications to be sent to. You can define multiple recipients like this: 09155555555 09177777777. |  | yes |

##### DEFAULT_RECIPIENT_KAVENEGAR

All roles will default to this variable if lest unconfigured.

You can then have different SMS recipients per role, by editing `DEFAULT_RECIPIENT_KAVENEGAR` with the SMS recipients you want, in the following entries at the bottom of the same file:
```text
role_recipients_kavenegar[sysadmin]="09100000000"
role_recipients_kavenegar[domainadmin]="09111111111"
role_recipients_kavenegar[dba]="0922222222"
role_recipients_kavenegar[webmaster]="0933333333"
role_recipients_kavenegar[proxyadmin]="0944444444"
role_recipients_kavenegar[sitemgr]="0955555555"
```

The values you provide should be defined as environments in `/etc/alertad.conf` with `ALLOWED_ENVIRONMENTS` option.


</details>

#### Examples

##### Basic Configuration



```yaml
#------------------------------------------------------------------------------
# Kavenegar (Kavenegar.com) SMS options

SEND_KAVENEGAR="YES"
KAVENEGAR_API_KEY="XXXXXXXXXXXX"
KAVENEGAR_SENDER="YYYYYYYY"
DEFAULT_RECIPIENT_KAVENEGAR="0912345678"

```


## Troubleshooting

### Test Notification

You can run the following command by hand, to test alerts configuration:

```bash
# become user khulnasoft
sudo su -s /bin/bash khulnasoft

# enable debugging info on the console
export KHULNASOFT_ALARM_NOTIFY_DEBUG=1

# send test alarms to sysadmin
/usr/libexec/khulnasoft/plugins.d/alarm-notify.sh test

# send test alarms to any role
/usr/libexec/khulnasoft/plugins.d/alarm-notify.sh test "ROLE"
```

Note that this will test _all_ alert mechanisms for the selected role.


